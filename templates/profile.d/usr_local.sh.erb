# Managed by Puppet <%= @module_name %>.

# Adjust $PATH using logic similar to pathmunge() in RedHat Bourne Shell
# CSH does not support functions, so we expand this in Puppet for consistency.
<%- scope.lookupvar('etc_profile::manpathadd').each do |k,v| -%>

if [ -d <%= k %> ]; then
    case ":${PATH}:" in
        *:"<%= k %>":*)
            ;;
        *)
<%-     if v['after'] then -%>
            export PATH=$PATH:<%= k %>
<%-     else -%>
            export PATH=<%= k %>:$PATH
<%-     end -%>
            ;;
    esac
fi
<%- end -%>

# Adjust $MANPATH using logic similar to pathmunge() in RedHat Bourne Shell
# CSH does not support functions, so we expand this in Puppet for consistency.
if (! $?MANPATH) then
  setenv MANPATH
endif

<%- scope.lookupvar('etc_profile::manpathadd').each do |k,v| -%>

if [ -d <%= k %> ]; then
    case ":${MANPATH}:" in
        *:"<%= k %>":*)
            ;;
        *)
<%-     if v['after'] then -%>
            set MANPATH=$MANPATH:<%= k %>
<%-     else -%>
            set MANPATH=<%= k %>:$MANPATH
<%-     end -%>
            ;;
    esac
fi
<%- end -%>

# Ensure OS X-style command
if ( -x /usr/libexec/path_helper ) then
    eval `/usr/libexec/path_helper -c`
endif
